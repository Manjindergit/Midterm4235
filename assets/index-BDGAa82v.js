(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();function d(r,o,i){let a=L.map("map").setView(r,15),e;L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(a),L.marker(r).addTo(a).bindPopup("KPU Surrey Library").openPopup(),navigator.geolocation?navigator.geolocation.watchPosition(t=>{const n=[t.coords.latitude,t.coords.longitude];e?e.setLatLng(n):e=L.marker(n,{icon:L.icon({iconUrl:"https://unpkg.com/leaflet@1.6.0/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})}).addTo(a).bindPopup("Your Location").openPopup(),document.getElementById("your-location").textContent=`${n[0].toFixed(4)}, ${n[1].toFixed(4)}`;const c=o(n,r).toFixed(2);document.getElementById("distance").textContent=c},()=>{i(!0)},{enableHighAccuracy:!0,maximumAge:0,timeout:27e3}):i(!1)}function p(r,o){function i(l){return l*Math.PI/180}const a=6371,e=i(o[0]-r[0]),t=i(o[1]-r[1]),n=i(r[0]),c=i(o[0]),s=Math.sin(e/2)*Math.sin(e/2)+Math.sin(t/2)*Math.sin(t/2)*Math.cos(n)*Math.cos(c),u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return a*u}function f(r){const o=document.getElementById("info");o.innerHTML=r?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."}const m=[49.132155392371075,-122.87096064785433];window.onload=()=>d(m,p,f);
